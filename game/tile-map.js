import Tile from "./tile.js"
export default class TileMap {
    width = 0;
    height = 0;
    array = [];

    constructor(width = 20, height = 20, array = [
        37, 20,20,20,20,20,20,20,20,20,20,20,20,20,30,11,11,11,11,11,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19,20,20,20,20,30,
        12, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10,
        12, 0, 10,11,12,0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 28,
        12, 0, 19,20,21,0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 28,11,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 38,38,19,20,30,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 38,38,0, 0, 0, 0, 0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 38,0, 0, 0, 0, 0, 0, 0, 0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 3, 0, 0, 0, 0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 10,11,11,11,29,3, 0, 0, 0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 10,11,11,11,11,29,3, 0, 0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 19,20,20,20,20,20,21,38,0, 0, 10,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 28,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,28, 11,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,28,11, 11,
        12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,28,11,11, 11,
        29, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,28,11,11,11, 11,
        11, 11,29,3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,28,11,11,11,11, 11,
        11, 11,11,29,3, 0, 2, 0, 0, 0, 0, 0, 1,28,11,11,11,11,11, 11,
        11, 11,11,11,29,2, 2, 2, 2, 2, 2, 2,28,11,11,11,11,11,11, 11
    ]) {
        this.width = width;
        this.height = height;
        this.array = array;
    }

    getTileId(x, y) {
        return this.array[x + y * this.width];
    }

    draw() {
        for (let x = 0; x < this.width; x++)
            for (let y = 0; y < this.height; y++) {
                let id = this.getTileId(x, y);
                if (id > 0) {
                    let pos = new Tile(x, y).toVec();
                    fill(id * 50, 100, 255 - id * 50);
                    rectMode(CENTER);
                    stroke(255);
                    strokeWeight(1);
                    rect(pos.x, pos.y, Tile.SIZE - 1, Tile.SIZE - 1);
                }
            }
    }
}